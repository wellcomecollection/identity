config:
  target: https://v1-api.stage.account.wellcomecollection.org
  phases:
    - duration: 1
      arrivalRate: 1
  environments:
    prod:
      target: https://v1-api.account.wellcomecollection.org
      phases:
        - duration: 1
          arrivalRate: 1
    stage:
      target: https://v1-api.stage.account.wellcomecollection.org
      phases:
        - duration: 1
          arrivalRate: 1
  ensure:
    maxErrorRate: 0
  processor: "./processorFunctions.js"
  plugins:
    expect: { }
    metrics-by-endpoint: { }
scenarios:
  - name: "/users/me"
    flow:
      - get:
          url: "/users/1101796"
          beforeRequest: addCredentials
          expect:
            statusCode: 200
      - get:
          url: "/users/1101796/item-requests"
          beforeRequest: addCredentials
          expect:
            statusCode: 200
